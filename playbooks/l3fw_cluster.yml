- name: Firewall Template
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Create a single layer 3 firewall
    l3fw_cluster:
      smc_logging:
        level: 10
        path: /Users/davidlepage/Downloads/ansible-smc.log
      antivirus: false
      backup_mgt: '2.34'
      bgp:
          announced_network:
          -   network:
                  name: foonet
                  route_map: newroutemap
          antispoofing_network:
              group:
              - group1
              host:
              - 2.2.2.3
              network:
              - foo
          autonomous_system:
              as_number: 4261608949
              comment: optional
              name: myas
          bgp_profile: Default BGP Profile
          enabled: true
          router_id: 1.2.3.4
      cluster_mode: balancing
      comment: my new firewall
      default_nat: false
      domain_server_address:
      - 8.8.8.8
      - 8.8.7.7
      file_reputation: false
      interfaces:
      -   interface_id: '1000'
          interfaces:
          -   nodes:
              -   address: 100.100.100.1
                  network_value: 100.100.100.0/24
                  nodeid: 1
              -   address: 100.100.100.2
                  network_value: 100.100.100.0/24
                  nodeid: 2
          type: tunnel_interface
          zone_ref: AWSTunnel
      -   cvi_mode: packetdispatch
          interface_id: '21'
          interfaces:
          -   cluster_virtual: 22.22.22.254
              network_value: 22.22.22.0/24
              nodes:
              -   address: 22.22.22.1
                  network_value: 22.22.22.0/24
                  nodeid: 1
              -   address: 22.22.22.2
                  network_value: 22.22.22.0/24
                  nodeid: 2
              vlan_id: '21'
          -   cluster_virtual: 21.21.21.254
              network_value: 21.21.21.0/24
              nodes:
              -   address: 21.21.21.2
                  network_value: 21.21.21.0/24
                  nodeid: 2
              -   address: 21.21.21.1
                  network_value: 21.21.21.0/24
                  nodeid: 1
              vlan_id: '20'
          macaddress: 02:02:02:20:20:22
      -   interface_id: '4'
          interfaces:
          -   nodes:
              -   address: 5.5.5.2
                  network_value: 5.5.5.0/24
                  nodeid: 1
              -   address: 5.5.5.3
                  network_value: 5.5.5.0/24
                  nodeid: 2
          zone_ref: heartbeat
      -   cvi_mode: packetdispatch
          interface_id: '0'
          interfaces:
          -   cluster_virtual: 1.1.1.1
              network_value: 1.1.1.0/24
              nodes:
              -   address: 1.1.1.2
                  network_value: 1.1.1.0/24
                  nodeid: 1
              -   address: 1.1.1.3
                  network_value: 1.1.1.0/24
                  nodeid: 2
          macaddress: 02:02:02:02:02:02
      -   comment: foocomment
          interface_id: '2'
          interfaces:
          -   comment: vlan comment
              nodes:
              -   address: 34.34.34.35
                  network_value: 34.34.34.0/24
                  nodeid: 2
              -   address: 34.34.34.34
                  network_value: 34.34.34.0/24
                  nodeid: 1
              vlan_id: '34'
          -   nodes:
              -   address: 35.35.35.35
                  network_value: 35.35.35.0/24
                  nodeid: 1
              -   address: 35.35.35.36
                  network_value: 35.35.35.0/24
                  nodeid: 2
              vlan_id: '35'
      location: foolocation
      name: newcluster2
      primary_heartbeat: '4'
      primary_mgt: '0'
      snmp:
          snmp_agent: myagent
          snmp_interface:
          - '2.35'
          - '2.34'
          - '0'
          snmp_location: snmplocation
      #state: absent
      tags:
      - footag
