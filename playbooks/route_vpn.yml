- name: Route Based VPN operations
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Create a new Route VPN with specified gateways
    route_vpn:
      smc_logging:
        level: 10
        path: /Users/davidlepage/Downloads/ansible-smc.log
      name: myrbvpn
      type: ipsec
      local_gw:
        name: newcluster
        tunnel_interface: 1001
        interface_id: 1
        #address: 2.2.2.2
      # remote_gw:
      #   name: myfw
      #   tunnel_interface: 1000
      #   interface_id: 0
      remote_gw:
        name: extgw3
        preshared_key: abc123
        type: external_gateway
        vpn_site:
          name: site12
          network:
            - network-172.18.1.0/24
            - network-172.18.2.0/24
          host:
            - hosta
        external_endpoint:
          - name: endpoint1
            address: 33.33.33.41
            enabled: true
          - name: endpoint2
            address: 34.34.34.34
            force_nat_t: true
            enabled: true
      tags:
        - footag
      #state: absent