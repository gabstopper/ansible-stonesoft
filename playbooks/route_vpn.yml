- name: Route Based VPN operations
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Create a new Route VPN with specified gateways
    route_vpn:
      smc_logging:
        level: 10
        path: /Users/davidlepage/Downloads/ansible-smc.log
      name: myrbvpn
      type: ipsec
      local_gw:
        name: newcluster
        tunnel_interface: 1001
        interface_id: 1
        #interface_ip: 10.10.10.10
      #remote_gw:
      #  name: dingo
      #  tunnel_interface: 1000
      #  interface_ip: 36.35.35.37
      remote_gw:
        name: extgw3
        type: external_gateway
        address: 33.33.33.41
        preshared_key: abc123
        network:
          - 172.18.1.0/24
          - 172.18.2.0/24
          - 172.18.15.0/24
      tags:
        - footag