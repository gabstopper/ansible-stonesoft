- name: Policy Based VPN operations
  hosts: localhost
  gather_facts: no
  tasks:
  - name: Create a new policy VPN with specified gateways
    policy_vpn:
      name: mynewvpn
      central_gw:
        - name: myfirewall
          type: internal_gateway
      satellite_gw:
        - name: extgw
          type: external_gateway
          preshared_key: abc123
      gateway_tunnel:
        - tunnel_side_a: extgw
          tunnel_side_b: myfirewall
          enabled: yes
          preshared_key: mynewkey
      tags:
        - footag